cc = console.log;
function reloadpage(){
	cc('reload');
	window.top.location = '/';
}
//window.onbeforeunload = reloadpage();
var xlink = '';
var xbase1 = {
		"menu": [{
			"name": "\u0628\u062e\u0634 1",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 2",
			"icon": null,
			"page": "8",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 3",
			"icon": null,
			"page": "15",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 4",
			"icon": null,
			"page": "22",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 5",
			"icon": null,
			"page": "29",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 6",
			"icon": null,
			"page": "36",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 7",
			"icon": null,
			"page": "43",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 8",
			"icon": null,
			"page": "50",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 9",
			"icon": null,
			"page": "57",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 10",
			"icon": null,
			"page": "64",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 11",
			"icon": null,
			"page": "71",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 12",
			"icon": null,
			"page": "78",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 13",
			"icon": null,
			"page": "85",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 14",
			"icon": null,
			"page": "92",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 15",
			"icon": null,
			"page": "99",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 16",
			"icon": null,
			"page": "106",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 17",
			"icon": null,
			"page": "113",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 18",
			"icon": null,
			"page": "120",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 19",
			"icon": null,
			"page": "127",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 20",
			"icon": null,
			"page": "134",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 21",
			"icon": null,
			"page": "141",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 22",
			"icon": null,
			"page": "148",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 23",
			"icon": null,
			"page": "155",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 24",
			"icon": null,
			"page": "162",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 25",
			"icon": null,
			"page": "169",
			"mode": "text",
			"link": xlink
		}]
	};

	var xbase2 = {
		"menu": [{
			"name": "\u0639\u062f\u062f \u0648 \u0631\u0642\u0645",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062c\u0645\u0639 \u0648 \u062a\u0641\u0631\u064a\u0642 \u0627\u0639\u062f\u0627\u062f \u062f\u0648 \u0631\u0642\u0645\u064a",
			"icon": null,
			"page": "19",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0627\u0634\u06a9\u0627\u0644 \u0647\u0646\u062f\u0633\u064a",
			"icon": null,
			"page": "37",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0647\u0627\u064a \u0633\u0647 \u0631\u0642\u0645\u064a",
			"icon": null,
			"page": "55",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "73",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062c\u0645\u0639 \u0648 \u062a\u0641\u0631\u064a\u0642 \u0627\u0639\u062f\u0627\u062f \u0633\u0647 \u0631\u0642\u0645\u064a",
			"icon": null,
			"page": "99",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u06a9\u0633\u0631 \u0648 \u0627\u062d\u062a\u0645\u0627\u0644",
			"icon": null,
			"page": "109",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0622\u0645\u0627\u0631 \u0648 \u0646\u0645\u0648\u062f\u0627\u0631",
			"icon": null,
			"page": "127",
			"mode": "text",
			"link": xlink
		}]
	};



	var xbase3 = {
		"menu": [{
			"name": "\u0627\u0644\u06af\u0648\u0647\u0627",
			"icon": null,
			"page": "7",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0647\u0627\u064a \u0686\u0647\u0627\u0631 \u0631\u0642\u0645\u064a",
			"icon": null,
			"page": "25",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0647\u0627\u064a \u06a9\u0633\u0631\u064a",
			"icon": null,
			"page": "43",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0636\u0631\u0628 \u0648 \u062a\u0642\u0633\u064a\u0645",
			"icon": null,
			"page": "61",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "73",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062c\u0645\u0639 \u0648 \u062a\u0641\u0631\u064a\u0642",
			"icon": null,
			"page": "97",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0622\u0645\u0627\u0631 \u0648 \u0627\u062d\u062a\u0645\u0627\u0644",
			"icon": null,
			"page": "115",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0636\u0631\u0628 \u0639\u062f\u062f\u0647\u0627",
			"icon": null,
			"page": "133",
			"mode": "text",
			"link": xlink
		}]
	}



	var xbase4 = {
		"menu": [{
			"name": "\u0627\u0639\u062f\u0627\u062f \u0648 \u0627\u0644\u06af\u0648\u0647\u0627",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u06a9\u0633\u0631",
			"icon": null,
			"page": "23",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0636\u0631\u0628 \u0648 \u062a\u0642\u0633\u064a\u0645",
			"icon": null,
			"page": "45",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "75",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0645\u062e\u0644\u0648\u0637 \u0648 \u0639\u062f\u062f \u0627\u0639\u0634\u0627\u0631\u064a",
			"icon": null,
			"page": "97",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0634\u06a9\u0644 \u0647\u0627\u064a \u0647\u0646\u062f\u0633\u064a",
			"icon": null,
			"page": "119",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0645\u0627\u0631 \u0648 \u0627\u062d\u062a\u0645\u0627\u0644",
			"icon": null,
			"page": "141",
			"mode": "text",
			"link": xlink
		}]
	}



	var xbase5 = {
		"menu": [{
			"name": "\u0639\u062f\u062f \u0646\u0648\u064a\u0633\u064a \u0648 \u0627\u0644\u06af\u0648\u0647\u0627",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u06a9\u0633\u0631",
			"icon": null,
			"page": "21",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0646\u0633\u0628\u062a\u060c\u062a\u0646\u0627\u0633\u0628\u060c\u062f\u0631\u0635\u062f",
			"icon": null,
			"page": "47",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062a\u0642\u0627\u0631\u0646 \u0648 \u0686\u0646\u062f \u0636\u0644\u0639\u064a \u0647\u0627",
			"icon": null,
			"page": "67",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0647\u0627\u064a \u0627\u0639\u0634\u0627\u0631\u064a",
			"icon": null,
			"page": "87",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "105",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0645\u0627\u0631 \u0648 \u0627\u062d\u062a\u0645\u0627\u0644",
			"icon": null,
			"page": "125",
			"mode": "text",
			"link": xlink
		}]
	}

	var xbase6 = {
		"menu": [{
			"name": "\u0639\u062f\u062f \u0647\u0627 \u0648 \u0627\u0644\u06af\u0648\u0647\u0627\u064a \u0639\u062f\u062f\u064a",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u06a9\u0633\u0631",
			"icon": null,
			"page": "23",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0627\u0639\u062f\u0627\u062f \u0627\u0639\u0634\u0627\u0631\u064a",
			"icon": null,
			"page": "43",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062a\u0642\u0627\u0631\u0646 \u0648 \u0645\u062e\u062a\u0635\u0627\u062a",
			"icon": null,
			"page": "63",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "87",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062a\u0646\u0627\u0633\u0628 \u0648 \u062f\u0631\u0635\u062f",
			"icon": null,
			"page": "109",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062a\u0642\u0631\u064a\u0628",
			"icon": null,
			"page": "131",
			"mode": "text",
			"link": xlink
		}]
	}
function legendHide($) {
	var chart = $('#lineChart').highcharts();
	var series = chart.series;
	var seriesIndex = 0
	if (series[seriesIndex].visible) {
		series[seriesIndex].hide();
	} else {
		series[seriesIndex].show();
	}
}

function descktopMenu($,payeh,fasl,link,menuPos){
	var ind = 1;
	var ret = 0;
	var bootstrap = '';
	
	if (base == 1) {
		data = xbase1;
	}
	if (base == 2) {
		data = xbase2;
	}
	if (base == 3) {
		data = xbase3;
	}
	if (base == 4) {
		data = xbase4;
	}
	if (base == 5) {
		data = xbase5;
	}
	if (base == 6) {
		data = xbase6;
	}
	jQuery.each(data.menu, function(index, obj){
		if(ind == 1){ret=1;}else{ret=0}
		$("#menuliD").append(descktopMenuRender(obj['name'] , ret , ind , index+1 , link));
		ind++;
	});
	if(ind < 18){
		$('.no-sub').addClass('col-lg-12');
		$('#menuliD').css({width : '325px'})
		if(menuPos == 'left'){$('#cssmenu').css({right : '1050px'})}else{$('#cssmenu').css({right : '150px'})}
	}else{
		$('#menuliD').css({width : '525px'})
		$('.no-sub').addClass('col-lg-6');
		if(menuPos == 'left'){$('#cssmenu').css({right : '900px'})}else{$('#cssmenu').css({right : '150px'})}
	}// end else
}
function descktopMenuRender(itemData, ret, top , fasl , link ,  active) {
	var activeT = '';
	ret == 1 ? rt = (52) : rt = (top * 45+7);
	var item = $("<div>").addClass('no-sub list-group-item'+ activeT)
		.css({
			'cursor': 'pointer',
			'text-align' : 'center',
			'background-color' : 'rgba(56, 215, 232, 0.5)' ,
			'color' : '#fff'
		}).append('<a  class="menu-a" style="color:#fff" href="../plugins/'+link+'.html?fasl=' + fasl + '">' + itemData + '</a>');
	return item;
}
function gameLister($,result,payeh,fasl){
	var ind = 1;
	var ret = 0;
	var bootstrap = '';
	
	if(fasl){
		jQuery.each(result, function(index, obj){
			if(obj[payeh].indexOf(String(fasl)) != -1 || obj[payeh].indexOf(parseInt(fasl)) != -1){
				if(ind == 1){ret=1;}else{ret=0}
				$("#menuliGame").append(gameMenuRender(obj['name'] , ret , ind , obj['id']));
				ind++;
			}
		});
	}else{
		jQuery.each(result, function(index, obj){
			if(obj[payeh].length  > 0){
				if(ind == 1){ret=1;}else{ret=0}
				$("#menuliGame").append(gameMenuRender(obj['name'] , ret , ind , obj['id']));
				ind++;
			}
		});
		
	}
	if(ind < 18){
		$('.no-sub').addClass('col-lg-12');
		$('#menuliGame').css({width : '325px'});
	}else{
		$('#menuliGame').css({width : '525px'});
		$('.no-sub').addClass('col-lg-6');
	}// end else
}
var pcID='',dhCode='',mixcod;
function basicList($ , payeList){
	"use strict";
	var obj = jQuery.parseJSON(payeList);
	var pa = '';
	jQuery.each(obj , function(i , index){
		switch(parseInt(obj[i])){
			case 1: pa = 'aval';break;
			case 2: pa = 'dovom';break;
			case 3: pa = 'sevom';break;
			case 4: pa = 'chaharom';break;
			case 5: pa = 'panjom';break;
			case 6: pa = 'sheshom';break;
		}
		$('#'+pa).html('<i class="fa fa-check-circle" style="color:green ; font-size:24px;"></i> <i style="color:green"> ثبت شده </i>');
	});
}

function xepon($){
	//return xepOnline.Formatter.Format('chart', {render:'download'});
	//var svg = html.getElementsByTagName('svg');
	//var canvas = document.getElementById('canvi');
	//console.log(canvas);
	var ifont = ""
		jQuery.ajax({
		  url: "fonts/BYekan.b64",
		  success: function(d){
			ifont = d;
		  }});
return ifont;
}
function contentSes($,data){
	jQuery.post('contentSes.php' , {datap : data} , function(d){console.log(d)});
}
function h2c2s(){
	html2canvas([$('#chart')[0]], {
    useCORS: true
  }).then(function (canvas) {
    if (navigator.msSaveBlob) {
      console.log('this is IE');
      var URL=window.URL;
      var BlobBuilder = window.MSBlobBuilder;
      navigator.saveBlob=navigator.msSaveBlob;
      var imgBlob = canvas.msToBlob();
      if (BlobBuilder && navigator.saveBlob) {
        var showSave =  function (data, name, mimetype) {
          var builder = new BlobBuilder();
          builder.append(data);
          var blob = builder.getBlob(mimetype||"application/octet-stream");
          if (!name)
            name = "Download.bin";
          navigator.saveBlob(blob, name);
        };
        showSave(imgBlob, 'barchart.png',"image/png");
      }
    } else {
      if ($('#export-image-container').length == 0)
          $('body').append('<a id="export-image-container" download="barchart.jpg">')
      img = canvas.toDataURL("image/jpeg")
      img = img.replace('data:image/jpeg;base64,', '')
      finalImageSrc = 'data:image/jpeg;base64,' + img

      $('#export-image-container').attr('href', finalImageSrc)
      $('#export-image-container')[0].click()
      $('#export-image-container').remove()
    }
  });
}
function createCanvas($,divId) {
        var svg = this.getSVG(),
            width = parseInt(svg.match(/width="([0-9]+)"/)[1]),
            height = parseInt(svg.match(/height="([0-9]+)"/)[1]),
            canvas = document.createElement('canvas');
        canvas.setAttribute('width', width);
        canvas.setAttribute('height', height);
        if (canvas.getContext && canvas.getContext('2d')) {
            canvg(canvas, svg);
            return canvas.toDataURL("image/jpeg");
        }
    }
function register($) {
	"use strict";
	var pass = 0;
	
	
	$('#userLine').click(function(){
		$('#user_pass').prop('disabled' , false);
		$('#subscribe')[0].selectize.disable();
		$('#number_reg')[0].selectize.disable();
		$('#offline').prop('checked' , true);
		$('#online').prop('checked' , false);
	});
	$('#subLine').click(function(){
		$('#user_pass').prop('disabled' , true);
		$('#subscribe')[0].selectize.enable();
		$('#number_reg')[0].selectize.enable();
		$('#offline').prop('checked' , false);
		$('#online').prop('checked' , true);
	});
	$('#user_pass').keyup(function(){
		pass = $(this).val();
		if(pass.length === 10){
			if(!navigator.onLine){
				$('.login-lightbox').fadeIn();
			}
		}
	});
	$('.light_close').click(function(){
		$('.login-lightbox').fadeOut();
	});
	$('#cancel_code').click(function(){
		$('.login-lightbox').fadeOut();
	});
	
	$('#regSub').click(function () {
		var version = $('input[name=payState]:checked').val();
		var name = $('#name').val();
		var email = $('#email').val();
		var mobile = $('#mobile').val();
		var base = $('#base').val();
		var subscribe = $('#subscribe').val();
		var number_reg = $('#number_reg').val();
		var user_pass = $('#user_pass').val();
		
		if(version === 'offline' || !navigator.onLine){
			jQuery.post('index.php' ,{name : name ,email : email , phone : mobile , shenase : user_pass||1 , activator : ''}, function(d){
				mixcod = d;
			});
		}
		if(navigator.onLine){
			jQuery.post('reg.php', {
				name: name,
				email: email,
				mobile: mobile ,
				base : base,
				subscribe : subscribe,
				number_reg : number_reg ,
				version : version,
				user_pass : user_pass ,
				mixcod : mixcod
			}, function (data) {
				var obj = jQuery.parseJSON(data);
				var x = obj.topic;
				if (obj.state === 'redirect') {
					localStorage.setItem("name", name);
					localStorage.setItem("email", email);
					localStorage.setItem("mobile", mobile);
					localStorage.setItem("base", base);
					localStorage.setItem("subscribe", subscribe);
					localStorage.setItem("number_reg", number_reg);
					localStorage.setItem("user_pass", user_pass);
					localStorage.setItem("mixcod", mixcod);
					window.top.location = x;
					//redirect(x);
				} else if (obj.state === 'error') {
					$('#regRes').html('<span class="ajaxRes">'+x+'</span>');
				}
			});
		}else{
			setTimeout(function(){
				$('#regRes').html('<span class="ajaxRes">ارتباط شما با اینترنت برقرار نیست</span>');
				var str = mixcod;
				var sep = str.match(/.{1,4}/g);
				$('#shCode').html('');
				for(var p=0 ; p < sep.length ; p++){
					if(p%2 === 0){
						$('#shCode').append('<span style="color:#000"> '+sep[p]+' </span>');
					}else{
						$('#shCode').append('<span style="color:#999"> '+sep[p]+' </span>');
					}
				}
				var option = {
					// render method: 'canvas', 'image' or 'div'
					render: 'canvas',
					// version range somewhere in 1 .. 40
					minVersion: 1,
					maxVersion: 40,
					// error correction level: 'L', 'M', 'Q' or 'H'
					ecLevel: 'L',
					// offset in pixel if drawn onto existing canvas
					left: 0,
					top: 0,
					// size in pixel
					size: 270,
					// code color or image element
					fill: '#000',
					// background color or image element, null for transparent background
					background: null,
					// content
					text: 'https://t.me/andishmand_bot?start='+mixcod,
					// corner radius relative to module width: 0.0 .. 0.5
					radius: 0,
					// quiet zone in modules
					quiet: 0,
					// modes
					// 0: normal
					// 1: label strip
					// 2: label box
					// 3: image strip
					// 4: image box
					mode: 0,
					mSize: 0.1,
					mPosX: 0.5,
					mPosY: 0.5,
					label: 'no label',
					fontname: 'sans',
					fontcolor: '#000',
					image: null
				};
				$('#qrcode').qrcode(option);
				$('.login-lightbox').fadeIn();
				$('#offline').prop('checked' , true);
				$('#user_pass').focus();
				$('#user_pass').prop('disabled' , false);
				$('#subscribe')[0].selectize.disable();
				$('#number_reg')[0].selectize.disable();
			},1000);
			
			$('#ok_code').on('click' , function(){
				var activeCodePut = $('#activeCodePut').val();
				jQuery.post('index.php' , {name : name ,email : email , phone : mobile , shenase : user_pass , activator : activeCodePut} , function(f){
					if(f === mixcod){
						f = 'اطلاعات وارد شده معتبر نمی باشد';
					}else if(f === 'ok'){
						window.reload();
					}
					$('#activeCodePutRes').html('<span>'+f+'</span>');
				});
			});
		}
	});
}

function d2h(decStr) {
	"use strict";
	return parseInt(decStr).toString(16);
}

function h2d(hexStr) {
	"use strict";
 	return parseInt(hexStr, 16);
}


var ssDefaults,al,t9=0;
t9 = isNaN(t9) ? 2: t9
//ssDefaults.synchronousCommands = true;
function remember($) {
	"use strict";
	$('#rememberSub').click(function () {
		var mobile = $('#mobile').val();
		var rememberState =  $('input[name=rememberState]:checked').val();
		jQuery.post('remember.php', {
			mobile: mobile , rememberState : rememberState
		}, function (data) {
			var obj = jQuery.parseJSON(data);
			var x = obj.topic;
			if (obj.state === 'redirect') {
				redirect(x);
			} else if (obj.state === 'error') {
				$('#regRes').text(x);
			}
		});
	});
}

function getFileList($) {
	jQuery.post('getFileList.php', function (d) {
		jQuery.each(JSON.parse(d), function (index, value) {
			$('#fileList').append('<li id="flist' + index + '" class="list-group-item list-title padd0"><div class="row" style="margin:0"><div class="col-lg-12" style="padding:3px"><span onclick="$p.showFile(\'' + value + '\')" style="cursor:pointer"> ' + value + ' </span><span class="delbtn" onclick="$p.delConf(\'' + value + '\' , \'' + index + '\')">حذف</span></div></div></li>');
		});
		//
	})
}

function delConf(file, index) {
	console.log('delc');
	$firtFrame = $('#main').contents().find('body');
	$firtFrame.append('<div class="lightbox" style="z-index:100"><div class="col-lg-4 center-block save-c" style="margin-top: 200px !important;"><div class="row"><div class="col-lg-6"><input onclick="$p.delFile(\'' + file + '\' , \'' + index + '\')" type="button" class="btn btn-danger login-btn btn-lg" value="حذف" ></div><div class="col-lg-6"><input onclick="$p.cancel()" type="button" class="btn btn-info login-btn btn-lg" value="بازگشت" ></div></div></div></div>');
}

function cancel() {
	$firtFrame = $('#main').contents().find('body');
	$firtFrame.find('.lightbox').remove();
}

function delFile(file, index) {
	jQuery.post('delFile.php', {
		file: file
	}, function () {
		$firtFrame = $('#main').contents().find('body');
		$firtFrame.find('.lightbox').remove();
		$firtFrame.find('#flist' + index).hide();
	});
}

function showFile(file) {
	jQuery.post('showFile.php', {
		file: file
	}, function (d) {

		$firtFrame = $('#main').contents().find('body');
		$ckFrame = $firtFrame.find('.cke_wysiwyg_frame').contents().find('body');
		$ckFrame.html(d);
		$firtFrame.find('#fileState').val(file)
			//$('body',$('iframe').contents().find('body' , $('iframe').contents().find('body'))).html(d);
			//CKEDITOR.instances['editor2'].getData();
		$('#editor2').html(d);
	});
}

function loginSub($) {
	$('#loginSub').click(function () {
		var user = $('#email').val();
		var pass = $('#password').val();
		if(navigator.onLine){
			var lineState = 'online';
		}else{
			var lineState = 'offline';
		}
		jQuery.post('login.php', {
			user: user,
			pass: pass ,
			lineState : lineState
		}, function (data) {
			var obj = jQuery.parseJSON(data);
			var x = obj.topic;
			if (obj.state === 'redirect') {
				redirect(x);
			} else if (obj.state === 'error') {
				$('#loginRes').html('<span class="ajaxRes">'+x+'</span>');
			}
		});
	});
}

function picker($, id, onSel) {
	$("#" + id).pDatepicker({
		format: "DD - MM - YYYY",
		position: [-20, -250],
		onSelect: function (event) {
			$('#' + onSel).val(event);
			$("#" + id).blur();
			//$('.datepicker-plot-area').fadeOut();
		}
	});
	
}

var startTime, endTime, lastEventTime, unvalidTime = 0

function eventer($) {

	var negPoint = 0,
		validTime = 0,
		eventTime = 0;

	var d = new Date();

	startTime = d.getTime(), lastEventTime = startTime;

	$('body').on('mousedown', pointer);

	$('body').on('keydown', pointer);

}

function pointer() {

	eventTime = new Date().getTime();

	unvalidTime += eventTime - lastEventTime > 60000 ? Math.round((eventTime - lastEventTime) / 60000) : 0

	lastEventTime = eventTime;

}

function unreload(fasl, base, topic) {

	endTime = new Date().getTime();

	var validTime = Math.round(((endTime - startTime) / 60000));

	return new Array(validTime, unvalidTime);

	/*$.ajax({

		url:"eventer.php?"+Math.floor(Math.random()*1000) ,

		data: {startTime : startTime , endTime : endTime , negPoint : unvalidTime , fasl : fasl , base : base , topic : topic},

		type: 'POST' ,

		success: function(d){

			console.log(d)

		}

	});*/

}

var parts = ['کتاب', 'گارگاه', 'بازی', 'سوال', 'محتوا'];

var days = 365;

var fasls = 10;



function r() {

	return Math.round(Math.random() * 100)

}

function randomcreate() {

	var day = [];

	var t = '';

	for (var i = 0; i < days; i++) {

		day[i] = [];

		for (var j = 0; j < parts.length; j++) {

			day[i][j] = [];

			for (var k = 0; k < fasls; k++) {

				day[i][j][k] = [r(), r()];

			}

		}

	}

	return day;

}





function jsonToChart($, data) {



	var chart = [],
		datas = [];

	var index = 0,
		n = 0;

	jQuery.each(data, function (i, item) {

		if (chart.indexOf(item.fasl) == -1) {

			chart.push(item.fasl);

			datas.push(item.point);

		} else {

			datas.push(item.point);

		}

	})

	console.log(chart, data)

}

function jsonToXis($, data) {

	var xAxis = [];

	jQuery.each(data, function (i, item) {

		xAxis.push(item.day);

	})

}



function pie($, dataes) {
	var pie = new Array();
	var sum = 0,
		c = 0;
	k = 0;
	d = dataes.length;
	for (k = d / 2; k < d; k++) {
		var sum = 0;
		for (j in dataes[k].data) {
			sum += dataes[k].data[j]
		}
		if(sum != 0){
			pie.push([dataes[k].name, sum]);
		}
		//pie.push([dataes[k].name, sum]);
	}
	if(pie.length == 0){
		for (k = d / 2; k < d; k++) {
			pie.push([dataes[k].name, 0.1]);
		}
	}
	console.log(pie)
	return pie;
}

function pieT($, dataes) {
	var pie = new Array();
	var sum = 0,c = 0;
	k = 0;
	zero = 0;
	d = dataes.length;
	for (k = d / 2; k < d - 1; k++) {
		var sum = 0;
		for (j in dataes[k].data) {
			sum += dataes[k].data[j]
		}
		if(sum != 0){
			pie.push([dataes[k].name, sum]);
		}
	}
	if(pie.length == 0){
		for (k = d / 2; k < d; k++) {
			pie.push([dataes[k].name, 0.1]);
		}
	}
	return pie;
}



function perSummary($, data, sday, eday, state) {
	var s = 0,c = 0;
	for (day = sday; day <= eday; day++) {
		for (i in data[day]) {
			for (j in data[day][i]) {
				for (k in data[day][i][j]) {
					s += data[day][i][j][state];
				} // end for k
			} // end for j
		} // end for i
	} // end for day
	return s;
}

function getDateOfYear($, day) {

	var now = new Date();

	var start = new Date(now.getFullYear(), 05, 21).getTime();

	var dayToTimstamp = day * 1000 * 60 * 60 * 24;

	var oneDay = start + dayToTimstamp;

	return oneDay;

}

function save($, dataChartShow) {

	savedata = 'dataChartShow = ' + JSON.stringify(dataChartShow) + ";"

	//console.log(savedata)

	path = "js/data.js";

	jQuery.ajax({

		url: "upload.php",

		type: 'POST',

		data: {
			text: savedata,
			path: path
		},

		error: function (e) {

			console.log(e)

		}

	})

}

function contentSave($) {
	console.log(localStorage.getItem("ck"));
	var fileName = $('#file').val();
	var content = localStorage.getItem("ck");

	path = "content/" + fileName + ".andish";
	jQuery.ajax({
		url: "contentSave.php",
		type: 'POST',
		data: {
			text: content,
			path: path
		},
		success: function (c) {
			localStorage.removeItem('ck');
			console.log('با موفقیت ذخیره شد');
			$('.lightbox').remove()
			getFileList();
		},
		error: function (e) {
			console.log(e);
		}
	})
}

function contentUpdate($, file) {
	var fileName = file;
	var content = localStorage.getItem("ck");

	path = "content/" + fileName;
	jQuery.ajax({
		url: "contentSave.php",
		type: 'POST',
		data: {
			text: content,
			path: path
		},
		success: function (c) {
			localStorage.removeItem('ck');
			console.log('با موفقیت ذخیره شد');
			getFileList();
		},
		error: function (e) {
			console.log(e);
		}
	})
}
function savepqq($,data,base,user){
	savedata = 'dataChartShow = '+JSON.stringify(data)+";"
	//console.log(savedata.length)
	path = "js/data/r-"+user+"-"+base+"-data.js";
	jQuery.ajax({
		url : "upload.php",
		type: 'POST',
		data:{text:savedata,path:path},
		success : function(d){
			console.log(d)	
		},
		error: function(e){
			console.log(e)
		}
	})
}
function getDayOfYear($, startDate, endDate) {

	var now = new Date();

	var start = new Date(now.getFullYear(), 05, 21);

	var diffS = startDate - start;

	var diffE = endDate - start;

	var oneDay = 1000 * 60 * 60 * 24;

	var dayS = Math.floor(diffS / oneDay);

	var dayE = Math.floor(diffE / oneDay);

	return new Array(dayS, dayE);

}



function tabShow($) {

	$('ul.nav-tabs').children('li').children('a').click(function () {

		$('ul.nav-tabs').children('li').removeClass('active');

		$(this).parent('li').addClass('active');

		$hid = $(this).attr('tab');

		$('div.tab-content').children('div').removeClass('in').removeClass('active');

		$('div#' + $hid).addClass('in').addClass('active');

	})

}



function Screanshoot($) {

	$('#Screanshoot').click(function () {

		$('body').html2canvas({

			onrendered: function (canvas) {

				var myImage = canvas.toDataURL("image/png");

				window.open(myImage);

			}

		});

	})

} // end function



function scroller($) {

	$('#menuli').on('mouseover', function () {

		$(this).css({
			'overflow': 'overlay'
		})

	}).stop()

	$('#menuli').on('mouseleave', function () {

		$(this).css({
			'overflow': 'hidden'
		})

	}).stop();

	$('body').hammer()

	.bind("panleft panright panup pandown tap press", function (ev) {

		if (ev.type == 'pandown' || ev.type == 'pandown') {

			$('#menuli').css({
				'overflow': 'overlay'
			})

		}

	});

}

function mainMenu($) {

	var menu = [

		['بازی', 'games.html', 'gamepad'],

		['گارگاه', 'workshop.html', 'briefcase'],

		['سوال', 'question.html', 'question-circle'],

		['محتوا', 'content.html', 'list-alt'],

		['کتاب', 'book.html', 'book'],

		['گزارش عملکرد', 'performance.html', 'book'],

		['خروج', 'logout.php', 'sign-out'],

	];

	for (var i = 0; i < menu.length; i++) {

		$('ul#s_menu').append('<li class="list-group-item main-menu-list"><a href="../plugins/' + menu[i][1] + '"><span>' + menu[i][0] + '</span><i class="fa fa-' + menu[i][2] + ' pull-left"></i></a></li>')

	}



}

function alt($) {
	"use strict";

	$('.planet-dash a').mouseenter(function () {

		var tit = $(this).attr('title');

		if (tit == 'تولید محتوا') {

			$(this).append('<div class="alt2">' + tit + '</div>');

		} else {

			$(this).append('<div class="alt">' + tit + '</div>');

		}

	});

	$('.planet-dash a').mouseleave(function () {

		$('div').remove('.alt');

		$('div').remove('.alt2');

	});

}

function dashboardLink($) {
	"use strict";

	$('.planet-dash').click(function () {

		var lnk = $('.planet-dash img').attr('title');

		redirect(lnk);

	});

}

function menu($) {
	$('#mainMenuBar').click(function () {
		$('#mainMenu').slideToggle();
	});
}

function outMenuClick($) {
	var $win = $('body'); // or $box parent container
	var $box = $("#mainMenu");
	var $bar = $("#mainMenuBar");
	$win.on("click", function (event) {
		if ($box.has(event.target).length == 0 && !$box.is(event.target) && !$bar.is(event.target)) {
			$box.slideUp();
		}
	});
}

function inMenuClick($) {
	$('#mainMenu').click(function (event) {
		event.stopPropagation();
	});
}

var fasl = 0

function redirect(href) {
	"use strict";
	if(href){
	var src = href.split("?");
	if (src[1]) {
		var params = src[1].split("&");
		cc(params)
		for (var j in params) {
			var vars = params[j].split("=");
			window[vars[0]] = vars[1];
			//cc(vars[0])
			//cc($p[vars[0]])
		}
	}
	scalers = [];
	$(".cover").show();
src[0] += "?r="+Math.random();
	$("#main").attr("src", src.join("#"));

	setTimeout(function () {
		$('a', $("#main").contents()).unbind("click")
		$('a', $("#main").contents()).click(function (e) {

			e.preventDefault();
			redirect($(this).attr('href'));

		});
	}, 1000)

	//	var paceOptions = {elements: {selectors: ['#main body'] }};
	$("body").attr("class", "")
	$("body").find('div .pace').attr("class", "")
	Pace.restart();
	}
}



var zindex = 3;

function getMenuItem(itemData, top, mode, ret, fasl, state, active) {

	if (itemData.mode == 'text') {
		ret == 1 ? rt = (top * 45 + 52) : rt = (top * 45);
		if (itemData.sub) {
			if (state == 'link' || !state) {
				var item = $("<li>").addClass('has-sub list-group-item').css({
						position: 'absolute',
						width: '315px',
						top: rt + 'px'
					})
					.attr('id', itemData.name).append('<a fasl="' + fasl + '" page="' + itemData.page + '" class="menu-a" href="../plugins/' + itemData.link + '?fasl=' + fasl + '">' + itemData.name + '</a>');
				var subList = $("<ul>").addClass('list-group').css({
					width: '100%'
				});
				var yu = 0;
				$$.each(itemData.sub, function () {
					subList.append(getMenuItem(this, yu, 'text', 0, fasl));
					yu++;
				});
				item.append(subList);
			} else if (state == 'click') {
				var item = $("<li>").addClass('has-sub list-group-item').css({
					position: 'absolute',
					width: '315px',
					top: rt + 'px'
				})
				.attr('id', itemData.name).append('<span fasl="' + fasl + '" page="' + itemData.page + '" class="menu-a" link="' + itemData.link + '?fasl=' + fasl + '">' + itemData.name + '</span>');
				var subList = $("<ul>").addClass('list-group').css({
					width: '100%'
				});
				var yu = 0;
				$$.each(itemData.sub, function () {
					subList.append(getMenuItem(this, yu, 'text', 0, fasl));
					yu++;
				});
				item.append(subList);
			}

		} else {
			var activeT = '';
			if (active == itemData.page) {
				activeT = 'per-active';
			}
			if (state == 'link' || !state) {
				var item = $("<li>").addClass('no-sub list-group-item ' + activeT)
					.css({
						'cursor': 'pointer',
						width: '315px',
						position: 'absolute',
						top: rt + 'px'
					}).attr('id', itemData.name)
					.append('<a fasl="' + fasl + '" page="' + itemData.page + '" class="menu-a" href="../plugins/' + itemData.link + '?fasl=' + fasl + '">' + itemData.name + '</a>');
			} else if (state == 'click') {
				var item = $("<li>").addClass('no-sub list-group-item ' + activeT)
					.css({
						'cursor': 'pointer',
						width: '315px',
						position: 'absolute',
						top: rt + 'px'
					}).attr('id', itemData.name)
					.append('<span fasl="' + fasl + '" page="' + itemData.page + '" class="menu-a" link="' + itemData.link + '?fasl=' + fasl + '">' + itemData.name + '</span>');
			}
		}

	} else if (itemData.mode == 'icon') {
		if (itemData.sub) {
			var item = $("<li>").addClass('has-sub list-group-item').attr('id', itemData.name).css({
				width: 'calc(100% + 0px)'
			}).append(
				'<img src="../plugins/img/' + itemData.name + '.png" class="img-responsive text-icon" title="' + itemData.name + '">');

			var subList = $("<ul>").addClass('list-group').css({
				width: '115px'
			});
			$$.each(itemData.sub, function () {
				subList.append(getMenuItem(this));
			});
			item.append(subList);
		} else {
			var item = $("<li>").addClass('no-sub list-group-item').css({
				'cursor': 'pointer',
				width: 'calc(100% + 0px)',
				'text-align': 'center'
			}).attr('id', itemData.name).append(
				'<img src="../plugins/img/' + itemData.name + '.png" class="img-responsive text-icon" title="' + itemData.name + '" />'
			);
		}
	} else if (itemData.mode == 'text-icon') {
		if (itemData.sub) {
			var item = $("<li>").addClass('has-sub list-group-item').attr('id', itemData.name).append('<a class="menu-a" href="../plugins/' + itemData.link + '?fasl=' + fasl + '"><img src="../plugins/img/' + itemData.icon + '.png" class="img-responsive text-icon" title="' + itemData.name + '">' + itemData.name + '</a>');
			var subList = $("<ul>").addClass('list-group').css({
				width: '100%'
			});
			$$.each(itemData.sub, function () {
				subList.append(getMenuItem(this));
			});
			item.append(subList);
		} else {
			var item = $("<li>").addClass('no-sub list-group-item').css({
				'cursor': 'pointer'
			}).attr('id', itemData.name).append(
				'<img src="../plugins/img/' + itemData.icon + '.png" class="img-responsive text-icon" title="' + itemData.name + '" />' + itemData.name
			);
		}
	}
	return item;

}



function perMenu($, xlink, clickState, active) {

	var data = {
		"menu": [{
			"name": "خلاصه عملکرد",
			"icon": null,
			"page": "week",
			"mode": "text",
			"link": "performance.html"
		}, {
			"name": "گزارش عملکرد روزانه",
			"icon": null,
			"page": "day",
			"mode": "text",
			"link": "performance_day.html"
		}, {
			"name": "گزارش عملکرد کلی",
			"icon": null,
			"page": "general",
			"mode": "text",
			"link": "performance_general.html"
		}, {
			"name": "گزارش عملکرد کتاب",
			"icon": null,
			"page": "book",
			"mode": "text",
			"link": "performance_book.html"
		}, {
			"name": "گزارش عملکرد کارگاه",
			"icon": null,
			"page": "workshop",
			"mode": "text",
			"link": "performance_workshop.html"
		}, {
			"name": "گزارش عملکرد بازی",
			"icon": null,
			"page": "game",
			"mode": "text",
			"link": "performance_games.html"
		}, {
			"name": "گزارش عملکرد سوال",
			"icon": null,
			"page": "question",
			"mode": "text",
			"link": "performance_question.html"
		}, {
			"name": "گزارش عملکرد محتوا",
			"icon": null,
			"page": "content",
			"mode": "text",
			"link": "performance_content.html"
		}]
	}



	var topPos = 0;

	var fasl = 1;

	jQuery.each(data.menu, function () {

		$("#pmenuli").append(getMenuItem(this, topPos, '', 1, fasl, clickState, active));

		topPos++;

		fasl++;

	});



}

function gameMenu($, list) {
	var topPos = 0;
	var fasl = 1;
	
	for(i = 0 ; i < list.length ; i++){
		$("#menuliGame").append(gameMenuRender(list[i] , 1 , i , i));
	}// end for
}// end function

function gameMenuRender(itemData, ret, top , fasl , active) {
	var activeT = '';
	ret == 1 ? rt = (52) : rt = (top * 45+7);
	var item = $("<div>").addClass('no-sub list-group-item'+ activeT)
		.css({
			'cursor': 'pointer',
			'text-align' : 'center',
			'background-color' : 'rgba(56, 215, 232, 0.5)' ,
			'color' : '#fff'
		}).append('<a  class="menu-a" style="color:#fff" href="../plugins/game_page.html?game_id=' + fasl + '">' + itemData + '</a>');
	return item;
}


function getMenuJson($, xlink, clickState) {

	var xbase1 = {
		"menu": [{
			"name": "\u0628\u062e\u0634 1",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 2",
			"icon": null,
			"page": "8",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 3",
			"icon": null,
			"page": "15",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 4",
			"icon": null,
			"page": "22",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 5",
			"icon": null,
			"page": "29",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 6",
			"icon": null,
			"page": "36",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 7",
			"icon": null,
			"page": "43",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 8",
			"icon": null,
			"page": "50",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 9",
			"icon": null,
			"page": "57",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 10",
			"icon": null,
			"page": "64",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 11",
			"icon": null,
			"page": "71",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 12",
			"icon": null,
			"page": "78",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 13",
			"icon": null,
			"page": "85",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 14",
			"icon": null,
			"page": "92",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 15",
			"icon": null,
			"page": "99",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 16",
			"icon": null,
			"page": "106",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 17",
			"icon": null,
			"page": "113",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 18",
			"icon": null,
			"page": "120",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 19",
			"icon": null,
			"page": "127",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 20",
			"icon": null,
			"page": "134",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 21",
			"icon": null,
			"page": "141",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 22",
			"icon": null,
			"page": "148",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 23",
			"icon": null,
			"page": "155",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 24",
			"icon": null,
			"page": "162",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0628\u062e\u0634 25",
			"icon": null,
			"page": "169",
			"mode": "text",
			"link": xlink
		}]
	};

	var xbase2 = {
		"menu": [{
			"name": "\u0639\u062f\u062f \u0648 \u0631\u0642\u0645",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062c\u0645\u0639 \u0648 \u062a\u0641\u0631\u064a\u0642 \u0627\u0639\u062f\u0627\u062f \u062f\u0648 \u0631\u0642\u0645\u064a",
			"icon": null,
			"page": "19",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0627\u0634\u06a9\u0627\u0644 \u0647\u0646\u062f\u0633\u064a",
			"icon": null,
			"page": "37",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0647\u0627\u064a \u0633\u0647 \u0631\u0642\u0645\u064a",
			"icon": null,
			"page": "55",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "73",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062c\u0645\u0639 \u0648 \u062a\u0641\u0631\u064a\u0642 \u0627\u0639\u062f\u0627\u062f \u0633\u0647 \u0631\u0642\u0645\u064a",
			"icon": null,
			"page": "99",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u06a9\u0633\u0631 \u0648 \u0627\u062d\u062a\u0645\u0627\u0644",
			"icon": null,
			"page": "109",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0622\u0645\u0627\u0631 \u0648 \u0646\u0645\u0648\u062f\u0627\u0631",
			"icon": null,
			"page": "127",
			"mode": "text",
			"link": xlink
		}]
	}



	var xbase3 = {
		"menu": [{
			"name": "\u0627\u0644\u06af\u0648\u0647\u0627",
			"icon": null,
			"page": "7",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0647\u0627\u064a \u0686\u0647\u0627\u0631 \u0631\u0642\u0645\u064a",
			"icon": null,
			"page": "25",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0647\u0627\u064a \u06a9\u0633\u0631\u064a",
			"icon": null,
			"page": "43",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0636\u0631\u0628 \u0648 \u062a\u0642\u0633\u064a\u0645",
			"icon": null,
			"page": "61",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "73",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062c\u0645\u0639 \u0648 \u062a\u0641\u0631\u064a\u0642",
			"icon": null,
			"page": "97",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0622\u0645\u0627\u0631 \u0648 \u0627\u062d\u062a\u0645\u0627\u0644",
			"icon": null,
			"page": "115",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0636\u0631\u0628 \u0639\u062f\u062f\u0647\u0627",
			"icon": null,
			"page": "133",
			"mode": "text",
			"link": xlink
		}]
	}



	var xbase4 = {
		"menu": [{
			"name": "\u0627\u0639\u062f\u0627\u062f \u0648 \u0627\u0644\u06af\u0648\u0647\u0627",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u06a9\u0633\u0631",
			"icon": null,
			"page": "23",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0636\u0631\u0628 \u0648 \u062a\u0642\u0633\u064a\u0645",
			"icon": null,
			"page": "45",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "75",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0645\u062e\u0644\u0648\u0637 \u0648 \u0639\u062f\u062f \u0627\u0639\u0634\u0627\u0631\u064a",
			"icon": null,
			"page": "97",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0634\u06a9\u0644 \u0647\u0627\u064a \u0647\u0646\u062f\u0633\u064a",
			"icon": null,
			"page": "119",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0645\u0627\u0631 \u0648 \u0627\u062d\u062a\u0645\u0627\u0644",
			"icon": null,
			"page": "141",
			"mode": "text",
			"link": xlink
		}]
	}



	var xbase5 = {
		"menu": [{
			"name": "\u0639\u062f\u062f \u0646\u0648\u064a\u0633\u064a \u0648 \u0627\u0644\u06af\u0648\u0647\u0627",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u06a9\u0633\u0631",
			"icon": null,
			"page": "21",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0646\u0633\u0628\u062a\u060c\u062a\u0646\u0627\u0633\u0628\u060c\u062f\u0631\u0635\u062f",
			"icon": null,
			"page": "47",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062a\u0642\u0627\u0631\u0646 \u0648 \u0686\u0646\u062f \u0636\u0644\u0639\u064a \u0647\u0627",
			"icon": null,
			"page": "67",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0639\u062f\u062f \u0647\u0627\u064a \u0627\u0639\u0634\u0627\u0631\u064a",
			"icon": null,
			"page": "87",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "105",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0645\u0627\u0631 \u0648 \u0627\u062d\u062a\u0645\u0627\u0644",
			"icon": null,
			"page": "125",
			"mode": "text",
			"link": xlink
		}]
	}

	var xbase6 = {
		"menu": [{
			"name": "\u0639\u062f\u062f \u0647\u0627 \u0648 \u0627\u0644\u06af\u0648\u0647\u0627\u064a \u0639\u062f\u062f\u064a",
			"icon": null,
			"page": "1",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u06a9\u0633\u0631",
			"icon": null,
			"page": "23",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0627\u0639\u062f\u0627\u062f \u0627\u0639\u0634\u0627\u0631\u064a",
			"icon": null,
			"page": "43",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062a\u0642\u0627\u0631\u0646 \u0648 \u0645\u062e\u062a\u0635\u0627\u062a",
			"icon": null,
			"page": "63",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u064a\u0631\u064a",
			"icon": null,
			"page": "87",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062a\u0646\u0627\u0633\u0628 \u0648 \u062f\u0631\u0635\u062f",
			"icon": null,
			"page": "109",
			"mode": "text",
			"link": xlink
		}, {
			"name": "\u062a\u0642\u0631\u064a\u0628",
			"icon": null,
			"page": "131",
			"mode": "text",
			"link": xlink
		}]
	}

	if (base == 1) {
		data = xbase1;
	}
	if (base == 2) {
		data = xbase2;
	}
	if (base == 3) {
		data = xbase3;
	}
	if (base == 4) {
		data = xbase4;
	}
	if (base == 5) {
		data = xbase5;
	}
	if (base == 6) {
		data = xbase6;
	}



	var topPos = 0;
	var fasl = 1;
	jQuery.each(data.menu, function () {
		$("#menuli").append(getMenuItem(this, topPos, '', 1, fasl, clickState));
		topPos++;
		fasl++;
	});
}



function DragMenu($) {

	var c = '';

	var Childpos;

	var startDragg = function (event) {

		t = event.target;

		$(t).css({
			"z-index": zindex++
		});

		if (!$(t).hasClass('clone')) {

			c = $(t).clone().insertAfter(this).draggable({

				start: startDragg,

				drag: function () {},

				stop: stopDrag,

				cancel: '.no-sub'

			}).addClass('clone no-sub');

		}

	}



	var stopDrag = function (event) {

		t = event.target;

		Childpos = $(t).offset();

		$(t).css({
			left: Childpos.left,
			top: Childpos.top,
			position: 'fixed',
			width: '315px',
			'background': 'none',
			'color': '#fff'
		}).animate({
			'border-radius': '4'
		}).children().animate({
			right: '0px',
			top: '52px',
			'color': '#000'
		});

		if (!$(t).hasClass('clone')) {

			$(t).addClass('clone child-drag').append('<i class="fa fa-times drag-close" style="color:#fff" aria-hidden="true"></i>')

		}

		$(t).mouseout(function (event) {

			$(t).children('ul').css({

				visibility: 'visible'

			});

		});

		$('.drag-close').click(function () {

			$(this).parent().next().removeClass('clone no-sub')

			$(this).parent().remove();

		})

	}

	$('.has-sub').draggable({

		start: startDragg,

		drag: function () {},

		stop: stopDrag,

		cancel: '.no-sub'

	});

}
